---
import type { ClubsPropsPages } from '@devprotocol/clubs-core'
import Posts_ from '../components/Page/Index.vue'
import type { Membership, Option } from '../types'
import { SlotName } from '../types'

interface Props extends ClubsPropsPages {
	options: Option[]
	feedId: string
	propertyAddress: string
	memberships?: Membership[]
	adminRolePoints: number
	emojiAllowList?: string[]
}

const {
	options,
	feedId,
	propertyAddress,
	memberships,
	adminRolePoints,
	emojiAllowList,
	clubs,
} = Astro.props

const SlotsPostsEditAfterContentForm = clubs.slots.filter(
	(slot) => slot.slot === SlotName.PostsEditAfterContentForm,
)
const SlotsPostsFeedAfterPostContent = clubs.slots.filter(
	(slot) => slot.slot === SlotName.PostsFeedAfterPostContent,
)
---

<Posts_
	client:load
	options={options}
	feedId={feedId}
	propertyAddress={propertyAddress}
	memberships={memberships}
	adminRolePoints={adminRolePoints}
	emojiAllowList={emojiAllowList}
>
	{
		SlotsPostsEditAfterContentForm.map((Slot) => (
			<Slot.component
				{...Slot.props}
				feedId={feedId}
				slot="edit:after:content-form"
			/>
		))
	}
	{
		SlotsPostsFeedAfterPostContent.map((Slot) => (
			<Slot.component
				{...Slot.props}
				feedId={feedId}
				slot="feed:after:post-content"
			/>
		))
	}
</Posts_>
